<!DOCTYPE html>
<html lang="en">
<head>
    <title>My Account</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/png" href="images/favicons/account.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/weather.css">
    <link rel="stylesheet" type="text/css" href="css/account_page.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,900" rel="stylesheet">
</head>
<body>
    <!--This is the nagivation bar-->
    <nav class="navbar navbar-light fixed-top" style="background-color: #025f80;">
        <a href="timeline.html" class="navbar-brand d-flex flex-row justify-content-start" style="font-family: GrenzeGotisch; padding: 0; font-size:27px; color: #c3d6e7; margin-right: 10px;">
        <img src="images/timeline.png" width="40" height="40" class="d-inline-block align-top" alt="" loading="lazy" style="margin-right: 10px;">
        ShowTime
        </a>
        <!--Weather API -->
        <div class="d-flex flex-row justify-content-start weather navbar-nav mr-auto">
            <p class="text-light text-center"><i class="fas fa-cloud-sun"></i><span id="hohoho"></span></p>
            <p class="text-light text-center"><i class="fas fa-temperature-low"></i><span id="hehehe"></span></p>
            <p class="text-light text-center"><i class="far fa-compass"></i><span id="reroro"></span></p>
        </div>
        <div class="dropdown">
            <img src="images/account.png" width="40" height="40" class="dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu2">
                <a href="account_page.html" class="dropdown-item" type="button">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-person-square" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                        <path fill-rule="evenodd" d="M2 15v-1c0-1 1-4 6-4s6 3 6 4v1H2zm6-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                    </svg>
                    My Account
                </a>
                <a href="budget.html" class="dropdown-item" type="button">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-pie-chart-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.985 8.5H8.207l-5.5 5.5a8 8 0 0 0 13.277-5.5zM2 13.292A8 8 0 0 1 7.5.015v7.778l-5.5 5.5zM8.5.015V7.5h7.485A8.001 8.001 0 0 0 8.5.015z"/>
                    </svg>
                    Budget Tracker
                </a>
                <a href="#" class="dropdown-item" type="button">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-box-arrow-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>
                        <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
                    </svg>
                    Log Out
                </a>
            </div>
        </div>
    </nav>
    <!--floating hoverable side navigation bar-->
    <div id="mySidenav" class="sidenav">
        <a href="timeline.html" id="first">Timeline</a>
        <a href="create_diary.html" id="second">+Diary</a>
        <a href="create_event.html" id="third">+Event</a>
        <a href="create_reminder.html" id="fourth">+Reminder</a>
        <a href="create_transaction.html" id="fifth">+Transaction</a>
    </div>
    <div style="height: 60px;"></div>
    <div class="container">
        <div class="row">
            <div class="col title">
                <h1>Tommy Trojan </h1>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <!--Avatar-->
        <div class="profile-pic-div">
          <div class="row">
              <img src="images/account.png" alt="Avatar" class="avatar" id="photo">

              <!--<button for="file" id="uploadBtn">Choose Photo</label>-->
          </div>
          <input type="file" id="file" accept="image/*">
          <label for="file">
            Change Your avatar
          </label>
        </div>
        <!--User Info-->
        <div class="info-container">
            <form id="info-form">
                <div class="form-group form-row">
                    <div class="col">
                        <input type="text" id="fname" name="fname" class="form-control" placeholder="First name" readonly="true">
                    </div>
                    <div class="col">
                        <input type="text" readonly="true" id="lname" name="lname" class="form-control" placeholder="Last name">
                    </div>
                </div>
                <div class="form-group">
                    <input type="email" id="email" name="email" class="form-control" placeholder="example@example.com" readonly="true">
                </div>
                <div class="form-group">
                    <textarea class="form-control" name="info" readonly="true" id="info" placeholder="Personal Info" rows="3"></textarea>
                </div>
                <button id="save" type="submit" class="btn-block btn-info">Save</button>
            </form>
        </div>
    </div>

    <!--Button-->
    <div class="fluid-container wrapper">
        <div class="row center-align">
            <div class="col">
                <button id="editButton" type="button" class="btn-block btn-info">Edit Profile</button>
            </div>
            <div class="col">
                <button id="pwdButton" type="button" class="btn-block btn-danger">Change Password</button>
            </div>
        </div>
    </div>
    <hr style="margin: 30px 2% 20px 2%;">
    <div class="bottom-menu">
        <div style="height: 55px;"></div>
        <div class="nav-icons d-flex flex-row justify-content-center fixed-bottom text-center">
            <a href="timeline.html" class="icon">
            <i class="fas fa-sort-amount-down"></i>
            </a>
            <a href="create_diary.html" class="icon">
            <i class="fas fa-feather-alt"></i>
            </a>
            <a href="create_event.html" class="icon">
            <i class="far fa-calendar-plus"></i>
            </a>
            <a href="create_reminder.html" class="icon">
            <i class="fas fa-tasks"></i>
            </a>
            <a href="create_transaction.html" class="icon">
            <i class="fas fa-hand-holding-usd"></i>
            </a>
        </div>
    </div>

    <div id="change-password">
        <form id="password-form" class="rounded-lg">
             <div class="form-group">
                <label for="new">New Password:</label>
                <input type="password" id="new" name="new" class="form-control" placeholder="New Password">
            </div>
            <div class="form-group">
                <label for="confirm">Confirm Password:</label>
                <input type="password" id="confirm" name="confirm" class="form-control" placeholder="Confirm Password">
            </div>
            <button type="submit" class="btn-block btn-danger">Change Password</button>
        </form>
    </div>

    <footer>
        <div class="text-center">
            <a href="https://github.com/CSCI201-ShowTime" target="_blank"><i class="fab fa-github"></i> ShowTime</a>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script type="text/javascript" src = "//unpkg.com/crypto-js/crypto-js.js"></script>
    
    <script src="js/weather.js"></script>
    
    <script>
    var myUrl = '/api/userinfo';
    var parsedJson;
    
    $.ajax({
        url: myUrl,
        type: 'GET',
        contentType: 'application/json; charset=utf-8',
        success: function (data, textStatus, xhr) {
            myJSON = JSON.stringify(data);
            parsedJson = JSON.parse(myJSON); 
            document.querySelector(".title h1").innerHTML = parsedJson.fname + ' ' + parsedJson.lname;
            document.querySelector("#fname").value = parsedJson.fname;
            document.querySelector("#lname").value = parsedJson.lname;
            document.querySelector("#email").value = parsedJson.email;
        },
        error: function (data, textStatus, xhr) {
            alert(data.responseText);
        }
    })
    
    
    </script>
    <script type="text/javascript" src="js/server/g-ready-userinfo.js"></script>
    <script type="text/javascript" src="js/account_page.js"></script>
    <script type="text/javascript" src="js/server/logout-server.js"></script>
    <script type="text/javascript" src="js/server/logout-navbar-temp.js"></script>
</body>
</html>
